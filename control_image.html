<html>
<head>

</head>
<script>

var websocket = new WebSocket("ws://192.168.19.190:6789/");
websocket.onmessage = function (event)
{
  picture_list=JSON.parse(event.data);
  newHTML="";
  for (var i=0;i<picture_list.length; i++)
  {
    console.log(picture_list[i]);
    newHTML=newHTML+"<button id=\""+picture_list[i]+"\">"+picture_list[i]+"</button>";
    //placement=document.getElementById("pictures");
    //new_button=document.createElement("button");
    //new_button.textContent=picture_list[i];
    //new_button.id=picture_list[i];
    //placement.appendChild(new_button);
    //document.getElementById(picture_list[i]).onClick=function(){switch_picture(this.id)}

  }
  document.querySelector("#pictures").addEventListener('click', function(e){switch_picture(e.target.id);});
  document.querySelector("#pictures").innerHTML=newHTML
}
function fetch_images()
{
  websocket.send('fetch_images');
  console.log('fetching images');
}
function switch_picture(new_pic)
{
  console.log('new_picture');
  websocket.send("change|"+new_pic);
}
</script>
<body>
<input type="button" id=get_images value="Get Image List" onclick="fetch_images()">
<div id="pictures"></div>
</body>
</html>
